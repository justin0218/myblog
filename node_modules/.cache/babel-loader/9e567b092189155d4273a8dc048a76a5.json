{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/justin/Desktop/my/client-pc/pages/chatroom.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nimport Layout from '../components/layout';\nimport * as api from '../apis/blog';\n\nvar _default =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(_default, _React$Component);\n\n  function _default() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(_default)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {});\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var roomid, socket;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                roomid = this.props.query.roomid;\n                socket = new ReconnectingWebSocket(\"ws://localhost:14001/v1/ws/chatroom?roomid=\".concat(roomid));\n                socket.debug = true;\n                socket.timeoutInterval = 5400;\n\n                socket.onopen = function () {\n                  socket.send(\"发送数据\");\n                };\n\n                socket.onmessage = function (evt) {\n                  var received_msg = evt.data;\n                  console.log(evt);\n                };\n\n                socket.onclose = function () {\n                  console.log(\"链接已关闭\");\n                };\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"jsx-4025681454\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        className: \"jsx-4025681454\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        className: \"jsx-4025681454\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(\"spa\", {\n        className: \"jsx-4025681454\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"2020-04-29 00:00:00\"), React.createElement(\"div\", {\n        className: \"jsx-4025681454\" + \" \" + \"chatbox\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"\\u963F\\u8428\\u7B54\\u4E86\\u51E0\\u9053\\u963F\\u65AF\\u8FBE\\u963F\\u65AF\\u8FBE\\u5783\\u573E\\u888B\\u4E86\")))), React.createElement(_JSXStyle, {\n        id: \"4025681454\",\n        __self: this\n      }, \".chatbox.jsx-4025681454{color:rgb(130,208,105);}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qdXN0aW4vRGVza3RvcC9teS9jbGllbnQtcGMvcGFnZXMvY2hhdHJvb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNkNvQixBQUdtQyx1QkFDeEIiLCJmaWxlIjoiL1VzZXJzL2p1c3Rpbi9EZXNrdG9wL215L2NsaWVudC1wYy9wYWdlcy9jaGF0cm9vbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9sYXlvdXQnO1xuaW1wb3J0ICogYXMgYXBpIGZyb20gJy4uL2FwaXMvYmxvZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgc3RhdGljIGFzeW5jIGdldEluaXRpYWxQcm9wcyh7IHJlcSxxdWVyeSxqc29uUGFnZVJlcyB9KSB7XG4gICAgY29uc3QgdXNlckFnZW50ID0gcmVxID8gcmVxLmhlYWRlcnNbJ3VzZXItYWdlbnQnXSA6IG5hdmlnYXRvci51c2VyQWdlbnRcbiAgICByZXR1cm4geyB1c2VyQWdlbnQscXVlcnksanNvblBhZ2VSZXMgfVxuICB9XG5cbiAgc3RhdGUgPSB7XG4gICAgIFxuICB9XG5cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICBjb25zdCB7cm9vbWlkfSA9IHRoaXMucHJvcHMucXVlcnk7XG4gICAgdmFyIHNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQoYHdzOi8vbG9jYWxob3N0OjE0MDAxL3YxL3dzL2NoYXRyb29tP3Jvb21pZD0ke3Jvb21pZH1gKTtcbiAgICAgICAgc29ja2V0LmRlYnVnID0gdHJ1ZTtcbiAgICAgICAgc29ja2V0LnRpbWVvdXRJbnRlcnZhbCA9IDU0MDA7XG4gICAgICAgIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbigpe1xuICAgICAgICAgIHNvY2tldC5zZW5kKFwi5Y+R6YCB5pWw5o2uXCIpO1xuICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgIHNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZ0KSBcbiAgICAgICAgeyBcbiAgICAgICAgICB2YXIgcmVjZWl2ZWRfbXNnID0gZXZ0LmRhdGE7XG4gICAgICAgICAgY29uc29sZS5sb2coZXZ0KVxuICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgIHNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oKVxuICAgICAgICB7IFxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi6ZO+5o6l5bey5YWz6ZetXCIpXG4gICAgICAgIH07XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxMYXlvdXQ+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgPHVsPlxuICAgICAgICAgICAgPGxpPlxuICAgICAgICAgICAgICA8c3BhPjIwMjAtMDQtMjkgMDA6MDA6MDA8L3NwYT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjaGF0Ym94XCI+6Zi/6JCo562U5LqG5Yeg6YGT6Zi/5pav6L6+6Zi/5pav6L6+5Z6D5Zy+6KKL5LqGPC9kaXY+XG4gICAgICAgICAgICA8L2xpPlxuICAgICAgICAgIDwvdWw+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgLmNoYXRib3h7XG4gICAgICAgICAgICBjb2xvcjpyZ2IoMTMwLDIwOCwxMDUpO1xuICAgICAgICAgIH1cbiAgICAgICAgYH08L3N0eWxlPlxuICAgICAgPC9MYXlvdXQ+XG4gICAgKVxuXG4gICBcblxuICB9XG59XG5cblxuIl19 */\\n/*@ sourceURL=/Users/justin/Desktop/my/client-pc/pages/chatroom.js */\"));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(_ref) {\n        var req, query, jsonPageRes, userAgent;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                req = _ref.req, query = _ref.query, jsonPageRes = _ref.jsonPageRes;\n                userAgent = req ? req.headers['user-agent'] : navigator.userAgent;\n                return _context2.abrupt(\"return\", {\n                  userAgent: userAgent,\n                  query: query,\n                  jsonPageRes: jsonPageRes\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return _default;\n}(React.Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/justin/Desktop/my/client-pc/pages/chatroom.js"],"names":["Layout","api","roomid","props","query","socket","ReconnectingWebSocket","debug","timeoutInterval","onopen","send","onmessage","evt","received_msg","data","console","log","onclose","req","jsonPageRes","userAgent","headers","navigator","React","Component"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,sBAAnB;AACA,OAAO,KAAKC,GAAZ,MAAqB,cAArB;;;;;;;;;;;;;;;;;;;;4DAQU,E;;;;;;;;;;;;;;;;AAKCC,gBAAAA,M,GAAU,KAAKC,KAAL,CAAWC,K,CAArBF,M;AACHG,gBAAAA,M,GAAS,IAAIC,qBAAJ,sDAAwEJ,MAAxE,E;AACTG,gBAAAA,MAAM,CAACE,KAAP,GAAe,IAAf;AACAF,gBAAAA,MAAM,CAACG,eAAP,GAAyB,IAAzB;;AACAH,gBAAAA,MAAM,CAACI,MAAP,GAAgB,YAAU;AACxBJ,kBAAAA,MAAM,CAACK,IAAP,CAAY,MAAZ;AACD,iBAFD;;AAIAL,gBAAAA,MAAM,CAACM,SAAP,GAAmB,UAAUC,GAAV,EACnB;AACE,sBAAIC,YAAY,GAAGD,GAAG,CAACE,IAAvB;AACAC,kBAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AACD,iBAJD;;AAMAP,gBAAAA,MAAM,CAACY,OAAP,GAAiB,YACjB;AACEF,kBAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,iBAHD;;;;;;;;;;;;;;;;;;6BAMG;AACP,aACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,EAEE;AAAA,4CAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4GAFF,CADF,CADF,CADF;AAAA;AAAA;AAAA,6yEADF;AAoBD;;;;;;;;;;;;AAnD8BE,gBAAAA,G,QAAAA,G,EAAId,K,QAAAA,K,EAAMe,W,QAAAA,W;AACjCC,gBAAAA,S,GAAYF,GAAG,GAAGA,GAAG,CAACG,OAAJ,CAAY,YAAZ,CAAH,GAA+BC,SAAS,CAACF,S;kDACvD;AAAEA,kBAAAA,SAAS,EAATA,SAAF;AAAYhB,kBAAAA,KAAK,EAALA,KAAZ;AAAkBe,kBAAAA,WAAW,EAAXA;AAAlB,iB;;;;;;;;;;;;;;;;;;;EAHkBI,KAAK,CAACC,S","sourcesContent":["import Layout from '../components/layout';\nimport * as api from '../apis/blog';\n\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n\n  state = {\n     \n  }\n\n  async componentDidMount(){\n    const {roomid} = this.props.query;\n    var socket = new ReconnectingWebSocket(`ws://localhost:14001/v1/ws/chatroom?roomid=${roomid}`);\n        socket.debug = true;\n        socket.timeoutInterval = 5400;\n        socket.onopen = function(){\n          socket.send(\"发送数据\");\n        };\n            \n        socket.onmessage = function (evt) \n        { \n          var received_msg = evt.data;\n          console.log(evt)\n        };\n            \n        socket.onclose = function()\n        { \n          console.log(\"链接已关闭\")\n        };\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div>\n          <ul>\n            <li>\n              <spa>2020-04-29 00:00:00</spa>\n              <div className=\"chatbox\">阿萨答了几道阿斯达阿斯达垃圾袋了</div>\n            </li>\n          </ul>\n        </div>\n        <style jsx>{`\n          .chatbox{\n            color:rgb(130,208,105);\n          }\n        `}</style>\n      </Layout>\n    )\n\n   \n\n  }\n}\n\n\n"]},"metadata":{},"sourceType":"module"}