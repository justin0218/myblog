{"version":3,"file":"static/webpack/static/development/pages/detail.js.1ea30ad7b976aeaaf7b5.hot-update.js","sources":["webpack:///./components/left.js"],"sourcesContent":["import Layout from '../components/layout'\nimport axios from 'axios'\nimport readStream from '../utils/util'\nimport protobuf from \"../proto/blog_pb\";\nimport {apiHost} from '../utils/config';\nimport Event from '../utils/emiter';\n\nexport default class extends React.Component {\n  static async getInitialProps({ req,query,jsonPageRes }) {\n    const userAgent = req ? req.headers['user-agent'] : navigator.userAgent\n    return { userAgent,query,jsonPageRes }\n  }\n\n  state = {\n    path:\"\",\n    orderIndex:[],\n    tps:[],\n    rankingList:[],\n    name:\"\",\n    recommends:[],\n    leftStyle:{}\n  }\n\n  registerKeyUp(){\n    document.getElementById(\"keyboard\").onkeyup = (event) => {\n      var e = event || window.event;\n      if (e && e.keyCode == 13) { //回车键的键值为13\n        location.href = `/article?name=${this.state.name}`\n      }\n    };\n  }\n\n  async componentDidMount(){\n    let res = await axios.get(`${apiHost}/v1/blog/types`,{\n      responseType: 'blob'\n    })\n    let data = await readStream(res.data);\n    let message = protobuf.tps.deserializeBinary(data);\n    data = message.toObject();\n    let rankingRes = await axios.get(`${apiHost}/v1/blog/ranking?limit=5`,{\n      responseType: 'blob'\n    })\n    let rankingData = await readStream(rankingRes.data);\n    let rankingMessage = protobuf.blogListRes.deserializeBinary(rankingData);\n    rankingData = rankingMessage.toObject();\n\n    let recommendRes = await axios.get(`${apiHost}/v1/blog/recommend`,{\n      responseType: 'blob'\n    })\n    let recommendData = await readStream(recommendRes.data);\n    let recommendMessage = protobuf.blogListRes.deserializeBinary(recommendData);\n    recommendData = recommendMessage.toObject();\n    this.setState({tps:data.listList,rankingList:rankingData.listList,recommends:recommendData.listList});\n    if(location.pathname == \"/article\" || location.pathname == \"/detail\"){\n      this.setState({orderIndex:[2,3,7,4,8,6]},this.registerKeyUp);\n    }else{\n      this.setState({orderIndex:[0,1,2,3,4,5,6]},this.registerKeyUp);\n    }\n    Event.on(\"left-fix\",()=>{\n      let rightHeight = document.getElementsByClassName(\"right_box\")[0].clientHeight;\n      let leftHeight = document.getElementById(\"left_box\").clientHeight;\n      if(leftHeight < rightHeight){\n        // var scrollTop = document.documentElement.scrollTop || window.pageYOffset || document.body.scrollTop;\n        this.setState({leftStyle:{\n          position:\"fixed\",\n          top:20\n        }})\n      }\n    })\n    Event.on(\"left-static\",()=>{\n      let rightHeight = document.getElementsByClassName(\"right_box\")[0].clientHeight;\n      let leftHeight = document.getElementById(\"left_box\").clientHeight;\n      if(leftHeight < rightHeight){\n        this.setState({leftStyle:{\n          position:\"static\"\n        }})\n      }\n    })\n  }\n\n  render() {\n    const {path,orderIndex,tps,name,rankingList,recommends,leftStyle} = this.state\n    return (\n        <div className=\"left_box\" id=\"left_box\" style={leftStyle}>\n          {\n            orderIndex.map(item => {\n              switch(item){\n                case 0:\n                  // 关于\n                  return <div key={item} className=\"left_item\">\n                  <h2>关于</h2>\n                  <div style={{padding: 12}}>\n                    <i className=\"about_me_i\">\n                      <img src=\"/static/images/me.jpeg\" style={{width:120,height:120}} />\n                    </i>\n                    <p style={{lineHeight: \"22px\",\"fontSize\": 14,marginTop: -6}}>\n                      <b>胡星</b>，93年出生，web前端工程师 && 服务端工程师，没什么特殊爱好，放假也是宅在家里，无聊的时候写写代码，研究研究技术方面的东西，对这种东西算一种热爱吧，但是我认为对于我来说，\n                                只是选择了这一条路，选择了就要热爱，干上一行就得爱上一行，如果当初的选择不是互联网，我也会很热爱。\n                    </p>\n                  </div>\n                </div>\n                case 1:\n                  return <div key={item} className=\"left_item\">\n                  <h2>相册</h2>\n                  <ul style={{padding: 10,overflow: \"hidden\",listStyle:\"none\",margin:0}}>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>\n                   <li><img src=\"/static/images/b02.jpg\" /></li>        \n                  </ul>\n                </div>\n                case 2:\n                  return <div key={item} className=\"search\" style={{marginBottom: 20}}>\n                    <input className=\"keyboard\" id=\"keyboard\" onChange={(e)=>{\n                      this.setState({name:e.target.value});\n                    }} className=\"input_text\" placeholder=\"请输入关键字词\" style={{color: \"#000\"}}  type=\"text\" />\n                    <button className=\"input_submit\" onClick={()=>{\n                      location.href = `/article?name=${name}`\n                    }}>搜索</button>\n                </div>\n                case 3:\n                  return <div key={item} className=\"left_item\">\n                    <h2>分类</h2>\n                    <div style={{padding:10}}>\n                    {\n                      tps.map((item,k)=>(\n                        <div key={k} onClick={()=>{\n                          location.href = `/article?tp=${item.id}`\n                        }} className=\"cation_item\">{item.lable}（{item.blogNum}）</div>\n                      ))\n                    }  \n                    </div>\n                  </div>\n                case 4:\n                  return <div key={item} className=\"left_item\">\n                    <h2>点击排行</h2>\n                    <div style={{padding:10}}>\n                      {\n                        rankingList.map((item,k)=>(\n                          <div className=\"cation_item\" onClick={()=>{\n                            location.href = `/detail?id=${item.id}`\n                          }} key={k} style={{backgroundImage:\"url(/static/images/li.png)\",backgroundRepeat: \"no-repeat\",backgroundPositionY: 9,textIndent: 13}}>\n                            <span style={{textOverflow: \"ellipsis\",whiteSpace: \"nowrap\",overflow: \"hidden\",width: 265,display: \"block\"}}>{item.name}</span>\n                          </div>\n                        ))\n                      } \n                    </div>\n                  </div>\n                case 5:\n                  return <div key={item} className=\"left_item\">\n                    <h2>友情链接</h2>\n                    <div style={{padding:10}}>\n                    <div className=\"cation_item\">百度</div>\n                    </div>\n                  </div>\n                case 6:\n                  return <div key={item} className=\"left_item\">\n                    <h2>关注我</h2>\n                    <div style={{padding:10}}>\n                      <img style={{width: \"86%\",background: \"#fff\",padding: 19}} src=\"/static/images/erweima.jpg\" />\n                    </div>\n                  </div>\n                case 7:\n                  return <div key={item} className=\"left_item\">\n                    <h2>站长推荐</h2>\n                    <div style={{padding:10}}>\n                      {\n                        recommends.map((item,k)=>(\n                          <div className=\"cation_item\" key={k} onClick={()=>{\n                            location.href = `/detail?id=${item.id}`\n                          }} style={{backgroundImage:\"url(/static/images/li.png)\",backgroundRepeat: \"no-repeat\",backgroundPositionY: 9,textIndent: 13}}>\n                            <span style={{textOverflow: \"ellipsis\",whiteSpace: \"nowrap\",overflow: \"hidden\",width: 265,display: \"block\"}}>{item.name}</span>\n                          </div>\n                        ))\n                      }  \n                    </div>\n                  </div> \n                case 8:\n                  return <div key={item} className=\"left_item\">\n                    <h2>标签云</h2>\n                    <div style={{padding:10}}>\n                      <a href={`/article?name=golang`} className=\"tag\" style={{background:\"#036564\"}}>golang</a>\n                      <a href={`/article?name=docker`} className=\"tag\" style={{background:\"#3299BB\"}}>docker</a>\n                      <div style={{clear:\"both\"}}></div>\n                    </div>\n                  </div>   \n              }\n            })\n          }  \n      \n        <style jsx>{`\n        .tag{\n          line-height: 24px;\n          height: 24px;\n          display: block;\n          background: #999;\n          float: left;\n          padding: 3px 11px;\n          margin: 10px 10px 0 0;\n          border-radius: 8px;\n          -moz-transition: all 0.5s;\n          -webkit-transition: all 0.5s;\n          -o-transition: all 0.5s;\n          transition: all 0.5s;\n          color: #FFF;\n          text-decoration: none;\n        }\n        .left_item .cation_item{\n          margin-bottom: 10px;\n          margin-left: 10px;\n          cursor: pointer;\n        }\n        .left_item .cation_item:hover{\n          color:#222;\n        }\n        .search{\n          border: 1px solid #000;\n          background: #000;\n          border-radius: 0 5px 5px 0;\n          position: relative;\n        }\n        .search .input_submit {\n              border: 0;\n              background: 0;\n              color: #fff;\n              outline: none;\n              position: absolute;\n              top: 10px;\n              right: 8%;\n              cursor: pointer;\n          }\n          .search input.input_text {\n              border: 0;\n              line-height: 36px;\n              height: 36px;\n              width: 72%;\n              padding-left: 10px;\n              outline: none;\n          }\n          .right_item p {\n            margin: 20px 0 0 0;\n            line-height: 22px;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            -webkit-box-orient: vertical;\n            display: -webkit-box;\n            -webkit-line-clamp: 2;\n          }\n          .right_item h3{\n            font-size: 16px;\n            line-height: 25px;\n            text-shadow: #FFF 1px 1px 1px;\n            color: #de4949;\n            margin:0;\n          }\n          .right_item i{\n            width: 150px;\n            display: block;\n            max-height: 100px;\n            overflow: hidden;\n            float: right;\n            margin-left: 20px;\n          }\n          .right_item{\n            background: rgba(255,255,255,0.8);\n            padding: 15px;\n            overflow: hidden;\n            color: #797b7c;\n            margin-bottom: 20px;\n          }\n          .left_box{\n            width:300px;\n            float:left;\n            transition:\"0.3s\",WebkitTransition:\"0.3s\"\n          }\n          .left_item{\n            background: rgba(255,255,255,0.5);\n            margin-bottom: 20px;\n            overflow: hidden;\n          }\n          .left_item ul li{\n            width: 32%;\n            overflow: hidden;\n            float: left;\n            height: 80px;\n            margin-bottom: 2px;\n            margin-right: 2px;\n          }\n          .left_item ul li img{\n            width: 100%;\n            height: 100%;\n            -webkit-transition: all 0.5s;\n            -moz-transition: all 0.5s;\n            transition: all 0.5s;\n            display:block;\n          }\n          .left_item h2{\n            color: #333;\n            font-size: 14px;\n            line-height: 30px;\n            padding-left: 20px;\n            background: #fff;\n            margin:0\n          }\n          .right_box{\n            width:680px;\n            float:right;\n          }\n          .about_me_i{\n            width: 120px;\n            float: left;\n            clear: left;\n            margin-right: 10px;\n            overflow: hidden;\n          }\n        `}</style>\n      </div>  \n    )\n  }\n}\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AACA;;;;;;AASA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AAGA;AACA;AADA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;;AACA;AACA;AADA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;;AAEA;AACA;AADA;AACA;;AADA;;AAGA;AACA;;AADA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AACA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AACA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AACA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnGA;AAuGA;AA1GA;AAAA;AAAA;AA6OA;;;;;;;;;;;;AAxTA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;;AAJA;AACA;;;;;A","sourceRoot":""}